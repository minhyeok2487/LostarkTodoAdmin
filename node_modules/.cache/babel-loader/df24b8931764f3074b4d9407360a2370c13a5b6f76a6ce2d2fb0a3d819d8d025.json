{"ast":null,"code":"import { API_BASE_URL } from \"../config/api-config\";\nexport function call(api, method, request) {\n  let headers = new Headers({\n    \"Content-Type\": \"application/json\"\n  });\n\n  // 로컬 스토리지에서 ACCESS TOKEN 가져오기\n  const accessToken = localStorage.getItem(\"ACCESS_TOKEN\");\n  if (accessToken && accessToken !== null) {\n    headers.append(\"Authorization\", \"Bearer \" + accessToken);\n  }\n  let options = {\n    headers: headers,\n    url: API_BASE_URL + api,\n    method: method\n  };\n  if (request) {\n    // GET method\n    options.body = JSON.stringify(request);\n  }\n  return fetch(options.url, options).then(response => {\n    if (response.status === 200) {\n      return response.json();\n    } else if (response.status === 403) {\n      window.location.href = \"/login\"; // redirect\n    } else {\n      new Error(response);\n    }\n  }).catch(error => {\n    console.log(\"http error\");\n    console.log(error);\n  });\n}\nexport function login(userDTO) {\n  return call(\"/api/auth/login\", \"POST\", userDTO).then(response => {\n    if (response.token) {\n      // 로컬 스토리지에 토큰 저장\n      localStorage.setItem(\"ACCESS_TOKEN\", response.token);\n      // token이 존재하는 경우 Todo 화면으로 리디렉트\n      window.location.href = \"/\";\n    }\n  });\n}\nexport function logout() {\n  localStorage.setItem(\"ACCESS_TOKEN\", null);\n  window.location.href = \"/login\";\n}\nexport function signup(userDTO) {\n  return call(\"/api/auth/signup\", \"POST\", userDTO);\n}","map":{"version":3,"names":["API_BASE_URL","call","api","method","request","headers","Headers","accessToken","localStorage","getItem","append","options","url","body","JSON","stringify","fetch","then","response","status","json","window","location","href","Error","catch","error","console","log","login","userDTO","token","setItem","logout","signup"],"sources":["/Users/minhyeok/Desktop/LostarkTodoAdmin/src/service/ApiService.js"],"sourcesContent":["import { API_BASE_URL } from \"../config/api-config\";\n\nexport function call(api, method, request) {\n  let headers = new Headers({\n    \"Content-Type\": \"application/json\",\n  });\n\n// 로컬 스토리지에서 ACCESS TOKEN 가져오기\n  const accessToken = localStorage.getItem(\"ACCESS_TOKEN\");\n   if (accessToken && accessToken !== null) {\n    headers.append(\"Authorization\", \"Bearer \" + accessToken);\n  }\n  \n  let options = {\n    headers: headers,\n    url: API_BASE_URL + api,\n    method: method,\n  };\n\n  if (request) {\n    // GET method\n    options.body = JSON.stringify(request);\n  }\n  \n  return fetch(options.url, options).then((response) => {\n    if (response.status === 200) {\n      return response.json();\n    } else if(response.status === 403) {\n      window.location.href = \"/login\"; // redirect\n    } else {\n      new Error(response);\n    }\n  }).catch((error) => {\n      console.log(\"http error\");\n      console.log(error);\n    });\n}\n\nexport function login(userDTO) {\n  return call(\"/api/auth/login\", \"POST\", userDTO)\n    .then((response) => {\n      if (response.token) {\n        // 로컬 스토리지에 토큰 저장\n        localStorage.setItem(\"ACCESS_TOKEN\", response.token);\n        // token이 존재하는 경우 Todo 화면으로 리디렉트\n        window.location.href = \"/\";\n      }  \n    });\n}\n\nexport function logout() {\n  localStorage.setItem(\"ACCESS_TOKEN\", null);\n  window.location.href = \"/login\";\n}\n\nexport function signup(userDTO) {\n  return call(\"/api/auth/signup\", \"POST\", userDTO);\n}"],"mappings":"AAAA,SAASA,YAAY,QAAQ,sBAAsB;AAEnD,OAAO,SAASC,IAAIA,CAACC,GAAG,EAAEC,MAAM,EAAEC,OAAO,EAAE;EACzC,IAAIC,OAAO,GAAG,IAAIC,OAAO,CAAC;IACxB,cAAc,EAAE;EAClB,CAAC,CAAC;;EAEJ;EACE,MAAMC,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;EACvD,IAAIF,WAAW,IAAIA,WAAW,KAAK,IAAI,EAAE;IACxCF,OAAO,CAACK,MAAM,CAAC,eAAe,EAAE,SAAS,GAAGH,WAAW,CAAC;EAC1D;EAEA,IAAII,OAAO,GAAG;IACZN,OAAO,EAAEA,OAAO;IAChBO,GAAG,EAAEZ,YAAY,GAAGE,GAAG;IACvBC,MAAM,EAAEA;EACV,CAAC;EAED,IAAIC,OAAO,EAAE;IACX;IACAO,OAAO,CAACE,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACX,OAAO,CAAC;EACxC;EAEA,OAAOY,KAAK,CAACL,OAAO,CAACC,GAAG,EAAED,OAAO,CAAC,CAACM,IAAI,CAAEC,QAAQ,IAAK;IACpD,IAAIA,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;MAC3B,OAAOD,QAAQ,CAACE,IAAI,CAAC,CAAC;IACxB,CAAC,MAAM,IAAGF,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;MACjCE,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ,CAAC,CAAC;IACnC,CAAC,MAAM;MACL,IAAIC,KAAK,CAACN,QAAQ,CAAC;IACrB;EACF,CAAC,CAAC,CAACO,KAAK,CAAEC,KAAK,IAAK;IAChBC,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;IACzBD,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EACpB,CAAC,CAAC;AACN;AAEA,OAAO,SAASG,KAAKA,CAACC,OAAO,EAAE;EAC7B,OAAO7B,IAAI,CAAC,iBAAiB,EAAE,MAAM,EAAE6B,OAAO,CAAC,CAC5Cb,IAAI,CAAEC,QAAQ,IAAK;IAClB,IAAIA,QAAQ,CAACa,KAAK,EAAE;MAClB;MACAvB,YAAY,CAACwB,OAAO,CAAC,cAAc,EAAEd,QAAQ,CAACa,KAAK,CAAC;MACpD;MACAV,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAG;IAC5B;EACF,CAAC,CAAC;AACN;AAEA,OAAO,SAASU,MAAMA,CAAA,EAAG;EACvBzB,YAAY,CAACwB,OAAO,CAAC,cAAc,EAAE,IAAI,CAAC;EAC1CX,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;AACjC;AAEA,OAAO,SAASW,MAAMA,CAACJ,OAAO,EAAE;EAC9B,OAAO7B,IAAI,CAAC,kBAAkB,EAAE,MAAM,EAAE6B,OAAO,CAAC;AAClD"},"metadata":{},"sourceType":"module","externalDependencies":[]}