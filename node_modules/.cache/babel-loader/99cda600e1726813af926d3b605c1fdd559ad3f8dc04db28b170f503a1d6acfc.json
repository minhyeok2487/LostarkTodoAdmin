{"ast":null,"code":"import{API_BASE_URL}from\"../config/api-config\";export function call(api,method,request){var headers=new Headers({\"Content-Type\":\"application/json\"});// 로컬 스토리지에서 ACCESS TOKEN 가져오기\nvar accessToken=localStorage.getItem(\"ACCESS_TOKEN\");if(accessToken&&accessToken!==null){headers.append(\"Authorization\",\"Bearer \"+accessToken);}var options={headers:headers,url:API_BASE_URL+api,method:method};if(request){// GET method\noptions.body=JSON.stringify(request);}return fetch(options.url,options).then(function(response){if(response.status===200){return response.json();}else if(response.status===403){window.location.href=\"/login\";// redirect\n}else{new Error(response);}}).catch(function(error){console.log(\"http error\");console.log(error);});}export function login(userDTO){return call(\"/api/auth/login\",\"POST\",userDTO).then(function(response){if(response.token){// 로컬 스토리지에 토큰 저장\nlocalStorage.setItem(\"ACCESS_TOKEN\",response.token);// token이 존재하는 경우 Todo 화면으로 리디렉트\nwindow.location.href=\"/\";}});}export function logout(){localStorage.setItem(\"ACCESS_TOKEN\",null);window.location.href=\"/login\";}export function signup(userDTO){return call(\"/api/auth/signup\",\"POST\",userDTO);}","map":{"version":3,"names":["API_BASE_URL","call","api","method","request","headers","Headers","accessToken","localStorage","getItem","append","options","url","body","JSON","stringify","fetch","then","response","status","json","window","location","href","Error","catch","error","console","log","login","userDTO","token","setItem","logout","signup"],"sources":["/Users/minhyeok/Desktop/LostarkTodoAdmin/src/service/ApiService.js"],"sourcesContent":["import { API_BASE_URL } from \"../config/api-config\";\n\nexport function call(api, method, request) {\n  let headers = new Headers({\n    \"Content-Type\": \"application/json\",\n  });\n\n// 로컬 스토리지에서 ACCESS TOKEN 가져오기\n  const accessToken = localStorage.getItem(\"ACCESS_TOKEN\");\n   if (accessToken && accessToken !== null) {\n    headers.append(\"Authorization\", \"Bearer \" + accessToken);\n  }\n  \n  let options = {\n    headers: headers,\n    url: API_BASE_URL + api,\n    method: method,\n  };\n\n  if (request) {\n    // GET method\n    options.body = JSON.stringify(request);\n  }\n  \n  return fetch(options.url, options).then((response) => {\n    if (response.status === 200) {\n      return response.json();\n    } else if(response.status === 403) {\n      window.location.href = \"/login\"; // redirect\n    } else {\n      new Error(response);\n    }\n  }).catch((error) => {\n      console.log(\"http error\");\n      console.log(error);\n    });\n}\n\nexport function login(userDTO) {\n  return call(\"/api/auth/login\", \"POST\", userDTO)\n    .then((response) => {\n      if (response.token) {\n        // 로컬 스토리지에 토큰 저장\n        localStorage.setItem(\"ACCESS_TOKEN\", response.token);\n        // token이 존재하는 경우 Todo 화면으로 리디렉트\n        window.location.href = \"/\";\n      }  \n    });\n}\n\nexport function logout() {\n  localStorage.setItem(\"ACCESS_TOKEN\", null);\n  window.location.href = \"/login\";\n}\n\nexport function signup(userDTO) {\n  return call(\"/api/auth/signup\", \"POST\", userDTO);\n}"],"mappings":"AAAA,OAASA,YAAY,KAAQ,sBAAsB,CAEnD,MAAO,SAAS,CAAAC,IAAIA,CAACC,GAAG,CAAEC,MAAM,CAAEC,OAAO,CAAE,CACzC,GAAI,CAAAC,OAAO,CAAG,GAAI,CAAAC,OAAO,CAAC,CACxB,cAAc,CAAE,kBAClB,CAAC,CAAC,CAEJ;AACE,GAAM,CAAAC,WAAW,CAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,CACvD,GAAIF,WAAW,EAAIA,WAAW,GAAK,IAAI,CAAE,CACxCF,OAAO,CAACK,MAAM,CAAC,eAAe,CAAE,SAAS,CAAGH,WAAW,CAAC,CAC1D,CAEA,GAAI,CAAAI,OAAO,CAAG,CACZN,OAAO,CAAEA,OAAO,CAChBO,GAAG,CAAEZ,YAAY,CAAGE,GAAG,CACvBC,MAAM,CAAEA,MACV,CAAC,CAED,GAAIC,OAAO,CAAE,CACX;AACAO,OAAO,CAACE,IAAI,CAAGC,IAAI,CAACC,SAAS,CAACX,OAAO,CAAC,CACxC,CAEA,MAAO,CAAAY,KAAK,CAACL,OAAO,CAACC,GAAG,CAAED,OAAO,CAAC,CAACM,IAAI,CAAC,SAACC,QAAQ,CAAK,CACpD,GAAIA,QAAQ,CAACC,MAAM,GAAK,GAAG,CAAE,CAC3B,MAAO,CAAAD,QAAQ,CAACE,IAAI,CAAC,CAAC,CACxB,CAAC,IAAM,IAAGF,QAAQ,CAACC,MAAM,GAAK,GAAG,CAAE,CACjCE,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CAAE;AACnC,CAAC,IAAM,CACL,GAAI,CAAAC,KAAK,CAACN,QAAQ,CAAC,CACrB,CACF,CAAC,CAAC,CAACO,KAAK,CAAC,SAACC,KAAK,CAAK,CAChBC,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC,CACzBD,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CACpB,CAAC,CAAC,CACN,CAEA,MAAO,SAAS,CAAAG,KAAKA,CAACC,OAAO,CAAE,CAC7B,MAAO,CAAA7B,IAAI,CAAC,iBAAiB,CAAE,MAAM,CAAE6B,OAAO,CAAC,CAC5Cb,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClB,GAAIA,QAAQ,CAACa,KAAK,CAAE,CAClB;AACAvB,YAAY,CAACwB,OAAO,CAAC,cAAc,CAAEd,QAAQ,CAACa,KAAK,CAAC,CACpD;AACAV,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,GAAG,CAC5B,CACF,CAAC,CAAC,CACN,CAEA,MAAO,SAAS,CAAAU,MAAMA,CAAA,CAAG,CACvBzB,YAAY,CAACwB,OAAO,CAAC,cAAc,CAAE,IAAI,CAAC,CAC1CX,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CACjC,CAEA,MAAO,SAAS,CAAAW,MAAMA,CAACJ,OAAO,CAAE,CAC9B,MAAO,CAAA7B,IAAI,CAAC,kBAAkB,CAAE,MAAM,CAAE6B,OAAO,CAAC,CAClD"},"metadata":{},"sourceType":"module","externalDependencies":[]}